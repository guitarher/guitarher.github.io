## 路由

- 在不同网段之间转发数据，需要有路由器的支持。
- 默认情况下，路由器只知道跟它直连的网段，非直连的网段需要通过静态路由、动态路由告诉它。
  - **静态路由**：管理员手动添加路由信息，适用于小规模网络。
  - **动态路由**：路由器通过路由选择协议（如RIP、OSPF）自动获取路由信息，适用于大规模网络。

## 路由表

### 路由器0

| 网络    | 子网掩码 | 下一跳    |
| ------- | -------- | --------- |
| 0.0.0.0 | 0.0.0.0  | 200.0.0.2 |

### 路由器1

| 网络        | 子网掩码      | 下一跳    |
| ----------- | ------------- | --------- |
| 0.0.0.0     | 0.0.0.0       | 200.0.1.1 |
| 195.171.1.0 | 255.255.255.0 | 200.0.2.2 |

### 路由器3

| 网络    | 子网掩码 | 下一跳    |
| ------- | -------- | --------- |
| 0.0.0.0 | 0.0.0.0  | 200.0.2.1 |

## 数据包的传输过程

- 数据包从源主机传输到目标主机的过程中，经过多个路由器和交换机。
- 数据包的源IP和目标IP保持不变，但MAC地址会随着经过的设备而变化。

## 网络、互联网、因特网

- **网络（Network）**：将多台计算机连接在一起。
- **互联网（Internet）**：全世界最大的互联网，将全世界所有的计算机连接在一起。
- **因特网（Internet）**：特指全球范围内的互联网。

## 网络分类

- **局域网（LAN）**：范围在几百米到十几公里内，常用于公司、家庭、学校等。
- **城域网（MAN）**：范围是数十公里到数百公里，覆盖一个城市。
- **广域网（WAN）**：范围是几百公里到几千公里，覆盖一个国家。

## 公网IP、私网IP

- **公网IP**：Internet上的路由器中只有到达公网的路由表，公网IP由Inter NIC统一分配和管理。
- **私网IP**：主要用于局域网，保留的私网网段包括：
  - A类：`10.0.0.0/8`，1个A类网络
  - B类：`172.16.0.0/16` ~ `172.31.0.0/16`，16个B类网络
  - C类：`192.168.0.0/24` ~ `192.168.255.0/24`，256个C类网络

## NAT（网络地址转换）

- **NAT**：私网IP访问Internet时需要进行NAT转换为公网IP
- **NAT的特点**：
  - 节约公网IP资源
  - 隐藏内部真实IP
- **NAT的分类**：
  - 静态转换：手动配置NAT映射表，一对一转换
  - 动态转换：定义外部地址池，动态随机转换，一对一转换
  - PAT（端口地址转换）：
    - 多对一转换，最大程度节约公网IP资源
    - 采用端口多路复用方式，通过端口号标识不同的数据流
    - 目前应用最广泛的NAT实现方式